<!-- <p-tabMenu [model]="items" [activeItem]="activeItem"></p-tabMenu> -->
<p-toast></p-toast>
<p-toast position="top-left" key="tl"></p-toast>
<p-toast position="top-center" key="tc"></p-toast>
<p-toast position="bottom-center" key="bc"></p-toast>
<div class="card">
    <!-- Basic Data -->
    <p-tabView styleClass="tabview-custom">

        <p-tabPanel>
            <ng-template pTemplate="header">
                <i class="pi pi-fw pi-home"></i>
                <span style="margin-left: 10px;">Project</span>
            </ng-template>
            <div class="row">
                <div class="p-field col-md-3">
                    <label for="Project Name" class="labelMarginRight">Project Name</label><br>
                    <!--  [(ngModel)]="product.name" -->
                    <input minlength="3" type="text" [(ngModel)]="projectObj.projectName" pInputText id="name" required
                        autofocus />
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Code" class="labelMarginRight">Project Code</label><br>
                    <input type="text" [(ngModel)]="projectObj.projectCode" pInputText id="Code" required autofocus />
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Type" class="labelMarginRight">Project Type Name</label><br>
                    <p-dropdown [options]="lstProjectTypes" [(ngModel)]="projectObj.projectTypeId"
                        placeholder="Select Project Type Name" optionLabel="typeName" optionValue="id">
                    </p-dropdown>
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Cost" class="labelMarginRight">Project Cost</label><br>
                    <input type="number" [(ngModel)]="projectObj.cost" pInputText id="Cost" required autofocus />
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
                <!-- <div class="p-field">
                <label for="description">Description</label>
                <textarea id="description" pInputTextarea  required rows="3" cols="20"></textarea>
            </div>       -->
            </div><br>
            <div class="row">

                <div class="p-field col-md-3">
                    <label for="Project Period" class="labelMarginRight">Project Period</label><br>
                    <input type="number" [(ngModel)]="projectObj.projectPeriod" pInputText id="Period" required
                        autofocus />
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
                <div class="p-field col-md-3">
                    <label for="Plannded Start Date" class="labelMarginRight">Plannded Start Date</label><br>
                    <p-calendar [(ngModel)]="projectObj.planndedStartDate" dateFormat="dd/mm/yy"></p-calendar>
                    <small class="p-invalid"></small>
                </div>
                <div class="p-field col-md-3">
                    <label for="Actual Start Date" class="labelMarginRight">Actual Start Date</label><br>
                    <p-calendar [(ngModel)]="projectObj.actualStartDate" dateFormat="dd/mm/yy"></p-calendar>
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
                <div class="p-field col-md-3">
                    <label for="Plannded End Date" class="labelMarginRight">Plannded End Date</label><br>
                    <p-calendar [(ngModel)]="projectObj.planndedEndDate" dateFormat="dd/mm/yy"></p-calendar>
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
            </div> <br>
            <div class="row">
                <div class="p-field col-md-3">
                    <label for="Actual End Date" class="labelMarginRight">Actual End Date</label><br>
                    <p-calendar [(ngModel)]="projectObj.actualEndDate" dateFormat="dd/mm/yy"></p-calendar>
                    <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                        letters</small> -->
                </div>
                <div class="p-field col-md-3">
                    <label for="organization Name" class="labelMarginRight">Organization Name</label><br>
                    <p-dropdown [options]="lstOrganizations" [(ngModel)]="projectObj.organizationId"
                        placeholder="Select Organization Name" optionLabel="organizationName" optionValue="id">
                    </p-dropdown>
                </div>
                <div class="p-field col-md-3">
                    <label for="Project Manager" class="labelMarginRight">Project Manager</label><br>
                    <p-dropdown [options]="lstEmployees" [(ngModel)]="projectObj.employeeId"
                        placeholder="Select Employee Name" optionLabel="employeeName" optionValue="id"></p-dropdown>
                </div>
                <div class="p-field col-md-3">
                    <label for="Client Name" class="labelMarginRight">Client Name</label><br>
                    <p-dropdown [options]="lstClients" [(ngModel)]="projectObj.clientId"
                        placeholder="Select Client Name" optionLabel="clientName" optionValue="id"></p-dropdown>
                </div>
            </div><br>
            <div class="row">
                <div class="p-field col-md-6">
                    <label for="description">Description</label><br>
                    <textarea id="description" [(ngModel)]="projectObj.description" pInputTextarea required rows="3"
                        cols="63"></textarea>
                </div>
                <div class="col-md-2" style="margin-top: 7%;margin-left: 28%;"> <button pButton type="button"
                        (click)="AddProject()" icon="pi pi-check" label="Submit" class="p-button-raised "></button>
                </div>
            </div>
        </p-tabPanel>



 

        <p-tabPanel>
            <ng-template pTemplate="header">
                <i class="pi pi-user-minus"></i>
                <span style="margin-left: 10px;">Create Stackholders</span>
            </ng-template>

            <div class="row">
                <div class="col">
                    <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                            <input type="text" pInputText placeholder="Stackeholder Name"
                                [(ngModel)]="stackholderInLst.stackeholderName">
                        </div>
                    </div>
                    <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon">00</span>
                            <input type="text" pInputText placeholder="Mobile" [(ngModel)]="stackholderInLst.mobile">
                            <span class="p-inputgroup-addon">.00</span>
                        </div>
                    </div>
                    <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon">00</span>
                            <input type="text" pInputText placeholder="Rank" [(ngModel)]="stackholderInLst.rank">
                            <span class="p-inputgroup-addon">.00</span>
                        </div>
                    </div>
                    <div class="p-col-12 p-md-4">
                        <div>
                            <textarea pInputTextarea placeholder="Description" style="width: 100%;"
                                [(ngModel)]="stackholderInLst.description" class="row p-col-12 p-md-4"></textarea>
                        </div>
                        <div>
                            <button class="btn btn-info" style="margin-top: 20px;float: right;"
                                (click)="Savetolist_Stackholders()">Save To List</button>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ProjectName</th>
                                <th>mobile</th>
                                <!-- <th>Projectcost</th> -->
                            </tr>
                        </thead>
                        <tbody>

                            <tr *ngFor="let i of lstOfStackholder">
                                <td>
                                    {{i.stackeholderName}}
                                </td>
                                <td>
                                    {{i.mobile}}
                                </td>
                            </tr>
                            <tr>

                            </tr>
                            <tr *ngIf="lstOfStackholder.length == 0">
                                <td colspan="4" style="color: rgb(102, 97, 23);">No stackholders found.</td>
                            </tr>
                        </tbody>

                    </table>

                    <button class="btn btn-warning" [disabled]="lstOfStackholder.length == 0"
                        (click)="SaveToDB_Stackholders()">Add List</button>
                </div>
            </div>
            
        </p-tabPanel>



        <p-tabPanel>
            <ng-template pTemplate="header">
                <i class="pi pi-user-minus"></i>
                <span style="margin-left: 10px;">Create Milestone</span>
            </ng-template>

            <div class="row">
                <div class="col">
                    <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                            <input type="text" pInputText placeholder="Title" [(ngModel)]="milestonInLst.title">
                        </div>
                    </div>
                    <!-- <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon">00</span>
                            <input type="text" pInputText placeholder="Mobile" [(ngModel)]="milestonInLst.title">
                            <span class="p-inputgroup-addon">.00</span>
                        </div>
                    </div> -->

                    <div class="row p-col-12 p-md-4">
                        <div class="p-field col-md-6">
                            <label for="StartDate" class="labelMarginRight">StartDate </label><br>
                            <p-calendar [(ngModel)]="milestonInLst.startDate" dateFormat="dd.mm.yy"></p-calendar>
                            <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                                letters</small> -->
                        </div>
                        <div class="p-field col-md-6">
                            <label for="End Date" class="labelMarginRight">End Date </label><br>
                            <p-calendar [(ngModel)]="milestonInLst.endDate" dateFormat="dd.mm.yy"></p-calendar>
                            <!-- <br> <small [hidden]="Name.valid || Name.untouched" id="helpId" class="text-muted">Must more than 3
                                letters</small> -->
                        </div>
                    </div>

                    <div class="p-col-12 p-md-4">
                        <div>
                            <textarea pInputTextarea placeholder="Description" [(ngModel)]="milestonInLst.description"
                                style="width: 100%;" class="row p-col-12 p-md-4"></textarea>
                        </div>
                        <div>
                            <button class="btn btn-info" style="margin-top: 20px;float: right;"
                                (click)="Savetolist_Milestones()">Save To List</button>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Start Date</th>
                                <th>Start Date</th>
                                <th>description</th>

                                <!-- <th>Projectcost</th> -->
                            </tr>
                        </thead>
                        <tbody>

                            <tr *ngFor="let i of lstOfMilestones">
                                <td>
                                    {{i.title}}
                                </td>
                                <td>
                                    {{i.startDate | date:'yyyy:MM:dd'}}
                                </td>
                                <td>
                                    {{i.endDate | date:'yyyy:MM:dd'}}
                                </td>
                                <td>
                                    {{i.description}}
                                </td>
                            </tr>
                            <tr>

                            </tr>
                            <tr *ngIf="lstOfMilestones.length == 0">
                                <td colspan="4" style="color: rgb(102, 97, 23);">No Milestones found.</td>
                            </tr>
                        </tbody>

                    </table>

                    <button class="btn btn-warning" [disabled]="lstOfMilestones.length == 0"
                        (click)="SaveToDB_Milestones()">Add List</button>
                </div>
            </div>
        </p-tabPanel>




        <p-tabPanel header="Header II">
            <ng-template pTemplate="header">
                <i class="pi pi-users"></i>
                <span style="margin-left: 10px;">Create Teams</span>
            </ng-template>

            <div class="row">
                <div class="p-col-12 p-md-4">
                    <div class="p-inputgroup">
                        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                        <input type="text" pInputText placeholder="Team Name"
                        [(ngModel)]="team.Name">
                    </div>
                </div>
                <div class="col">
                    <div class="col">
                        <label class="labelstyle">Select Position Name</label>
                        <select [(ngModel)]="ProjectTeam.projectPositionId" name="id" class="form-control">emp
                            <option hidden [value]="" selected>select Position Name </option>
                            <option *ngFor="let the of lstOfprojectPosition" value="{{the.id}}">{{the.positionName}}
                            </option>
                        </select>
                    </div>

                    <div class="col">
                        <label class="labelstyle">Select Employee Name</label>
                        <select [(ngModel)]="ProjectTeam.employeeId" name="sel2" class="form-control"
                            (change)="OnChangeEmpID($event)">
                            <option *ngFor="let th of lstEmployees" value="{{th.id}}">{{th.employeeName}}</option>
                        </select>
                    </div>
                    
                    <div class="col">
                        <label class="labelstyle">Department Name</label>
                        <select [(ngModel)]="ProjectTeam.departmentId" name="sub" class="form-control">
                            <option value="{{department.id}}">{{department.name}}</option>
                        </select>
                    </div>
            
                    <div class="p-col-12 p-md-4">

                        <div>
                            <button class="btn btn-info" style="margin-top: 20px;float: right;"
                                (click)="Savetolist_Teams()">Save To List</button>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <table class="table">
                        <thead>
                            <tr>Team Name : {{teamname}}</tr>
                            <tr>
                                <th>Position Name</th>
                                <th>Employee Name</th>
                                <th>Department Name</th>
                                <!-- <th>Projectcost</th> -->
                            </tr>
                        </thead>
                        <tbody>

                            <tr *ngFor="let i of lstOfProjectTeams">
                                <td>
                                    {{i.projectPositionName}}
                                </td>
                                <td>
                                    {{i.employeeName}}
                                </td>
                                <td>
                                    {{i.departmentName}}
                                </td>
                            </tr>

                            <tr *ngIf="lstOfProjectTeams.length == 0">
                                <td colspan="4" style="color: rgb(102, 97, 23);">No ProjectTeams found.</td>
                            </tr>
                        </tbody>

                    </table>

                    <button class="btn btn-warning" [disabled]="lstOfProjectTeams.length == 0"
                        (click)="SaveToDB_ProjectTeams()">Add List</button>
                </div>
            </div>
        </p-tabPanel>
        <p-tabPanel header="Header III">
            <ng-template pTemplate="header">
                <i class="pi pi-file"></i>
                <span style="margin-left: 10px;">Add Document</span>
                <!-- <i class="pi pi-cog"></i> -->
            </ng-template>
            <div class="row">
                <div class="col">
                    <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                            <input type="text" pInputText placeholder="Document Name"
                            [(ngModel)]="docproject.documentName">
                        </div>
                    </div>       
                    <div class="p-col-12 p-md-4">
                        <div>
                            <textarea pInputTextarea placeholder="Description" style="width: 100%;"
                            [(ngModel)]="docproject.Description" class="row p-col-12 p-md-4"></textarea>
                        </div>
                        <br/>
                        <br/>
                        <div class="p-field col-md-3" style="margin-bottom:15px;">
                            <div class="col-md-3">
                                <input type="file" #file placeholder="Choose file" (change)="uploadFile(file.files)"
                                    style="display:none;">
                                <button type="button" class="btn btn-success" (click)="file.click()">Upload File</button>
                            </div>
                            <div class="col-md-4">
                              
                                <span class="upload" *ngIf="message">
        
                                    {{message}}
                                </span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-info" style="margin-top: 20px;float: right;"
                                (click)="Savedoctolist()">Save To List</button>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Document Name</th>
                        <th >Document Description</th>
                        <th >File Name</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr *ngFor="let i of lstoddocproj">

                                <td>{{i.documentName}}</td>
                                <td>{{i.Description}}</td>
                                <td>{{i.DocumentFile}}</td>
                            </tr>
                            <tr>

                            </tr>
                            <tr *ngIf="lstoddocproj.length == 0">
                                <td colspan="4" style="color: rgb(102, 97, 23);">No Documents found.</td>
                            </tr>
                        </tbody>

                    </table>

                    <button class="btn btn-warning" [disabled]="lstoddocproj.length == 0"
                        (click)="SaveDocuentToDB()">Add List</button>
                </div>
            </div>
         
        </p-tabPanel>
    </p-tabView>

</div>